<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Permet une utilisation confortable sur mobile (zoom et largeur adaptés automatiquement) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flask Calculator</title>
    <!-- Un seul fichier CSS pour centraliser le style et faciliter la maintenance -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="calculator">
      <h1>Flask Calculator</h1>
      <!-- Formulaire POST pour sécuriser l'envoi des données au serveur -->
      <form method="POST">
        <!-- Champ en lecture seule : l'utilisateur voit son calcul mais ne peut pas le modifier directement (évite les erreurs) -->
        <input
          type="text"
          name="display"
          id="display"
          value="{{ result }}"
          readonly
        />

        <div class="buttons">
          <!-- Les chiffres s'affichent immédiatement pour que l'utilisateur voie son calcul se construire en temps réel -->
          <button type="button" class="btn" onclick="appendToDisplay('1')">
            1
          </button>
          <button type="button" class="btn" onclick="appendToDisplay('2')">
            2
          </button>
          <button type="button" class="btn" onclick="appendToDisplay('3')">
            3
          </button>
          <!-- Opérateurs en orange pour les distinguer visuellement des chiffres -->
          <button
            type="button"
            class="btn operator"
            onclick="appendToDisplay('+')"
          >
            +
          </button>

          <button type="button" class="btn" onclick="appendToDisplay('4')">
            4
          </button>
          <button type="button" class="btn" onclick="appendToDisplay('5')">
            5
          </button>
          <button type="button" class="btn" onclick="appendToDisplay('6')">
            6
          </button>
          <!-- Opérateurs en orange pour les distinguer visuellement des chiffres -->
          <button
            type="button"
            class="btn operator"
            onclick="appendToDisplay('-')"
          >
            -
          </button>

          <button type="button" class="btn" onclick="appendToDisplay('7')">
            7
          </button>
          <button type="button" class="btn" onclick="appendToDisplay('8')">
            8
          </button>
          <button type="button" class="btn" onclick="appendToDisplay('9')">
            9
          </button>
          <!-- Opérateurs en orange pour les distinguer visuellement des chiffres -->
          <button
            type="button"
            class="btn operator"
            onclick="appendToDisplay('*')"
          >
            *
          </button>

          <button type="button" class="btn" onclick="appendToDisplay('0')">
            0
          </button>
          <!-- Bouton "C" (Clear) pour corriger rapidement une erreur de saisie -->
          <button type="button" class="btn" onclick="clearDisplay()">C</button>
          <!-- Bouton "=" de type submit : déclenche le calcul côté serveur pour plus de sécurité -->
          <button type="submit" class="btn operator">=</button>
          <!-- Opérateurs en orange pour les distinguer visuellement des chiffres -->
          <button
            type="button"
            class="btn operator"
            onclick="appendToDisplay('/')"
          >
            /
          </button>
        </div>
      </form>
    </div>

    <script>
      // Ajoute un chiffre ou opérateur à l'affichage sans recharger la page (fluidité)
      function appendToDisplay(value) {
        const display = document.getElementById("display");
        display.value += value;
      }

      // Vide l'affichage d'un seul coup pour permettre à l'utilisateur de recommencer facilement
      function clearDisplay() {
        document.getElementById("display").value = "";
      }
    </script>
  </body>
</html>